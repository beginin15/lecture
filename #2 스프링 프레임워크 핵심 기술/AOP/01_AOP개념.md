# 스프링 AOP 1부

## AOP

- 흩어진 관심사를 모듈화 할 수 있는 프로그래밍 기법

  > 관점에 따라 비즈니스 로직과 부가적인 로직으로 나뉘며, 특히 여러 곳에서 중복되는 부가적인 기능을 *흩어진 관심사* 라고 한다.

- OOP를 보완하는 수단

- AOP가 적용된 대표적인 사례 : 트랜잭션 처리, 로깅

  </br>

### 사용 이유

- 비즈니스 로직과 별개인 **부가적인 기능**을 수행하는 코드가 여러 지점에서 중복되어 사용되는 경우, 해당 기능을 수정하려면 중복된 모든 곳을 찾아서 변경해줘야 한다.

- 위와 같은 상황에서 스프링 AOP가 제공하는 **Aspect** 개념을 활용하면 해당 Aspect만 수정하면 되므로 유지 보수가 쉬워진다.

  </br>

### 자바 구현체

- AspectJ

- 스프링 AOP

  </br>

## 용어

### Aspect

- 관심사(중복 코드)를 **모듈화**한 것
- 해야할 일(Advice)과 어디에 적용해야할지(Pointcut)에 대한 정보가 필요하다.

### Advice

- 해야할 일 (구체적 기능)

### Target

- 적용이 되는 대상
  - 구체적인 클래스 타입을 명시한다.

### Point cut

- Advice를 어디에 적용할지
- 어떤 Target에 어떤 Join point 스펙으로 적용할 것인지를 포함한다.

### Join point

- Aspect가 합류하는 시점

  > ex) 메소드 실행 시점, 생성자 호출 직전, 생성자 호출 시점, 필드 접근 시점

  </br>

## 적용 방법

### 컴파일

- 자바 파일이 클래스 파일로 변환되는 시점에 적용되어, Aspect가 포함된 바이트 코드를 생성한다.

  > 즉, 컴파일하고 나면 클래스 파일에 Aspect 코드가 포함되어 있다.

- 특징
  - 로드 타임과 런타임에 비해 성능 부하가 적다.
  - 별도의 컴파일링 과정을 거쳐야 한다.

### 로드 타임

- 클래스 파일을 로딩하는 시점에 Aspect가 적용된다.

  > Load-time weaving

- 특징
  - 로드할 때 약간의 성능 부하가 발생한다.
  - Java Agent를 설정해줘야 한다.

### 런타임

- 스프링에서 빈을 생성하는 시점에 프록시 객체를 만들어서 Aspect를 적용한다.
- 스프링 AOP가 사용하는 방법
- 특징
  - 빈을 생성하는 시점에 약간의 성능 부하가 발생한다.
  
  - 컴파일과 로드 타임에 적용하는 것과 달리, 별도의 설정이 필요없고 비교적 간단하게 적용이 가능하다.
  
    </br>

## 기타

### Load-time weaving 📌

- 로딩하는 클래스 파일을 변경하는 방법

  </br>

### AspectJ 📌

- 스프링 AOP보다 다양한 Join Point를 제공한다.
- 컴파일, 로드 타임 시점에 AOP를 적용한다.
- 스프링 AOP와 연동하여 사용할 수 있다.